<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Valinor Library | Painel do Guardião</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 
    font-size=%2290%22 fill=%22%23F5C469%22>✦</text></svg>">
  <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&family=Inter:wght@400;600&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/feather-icons"></script>
</head>

<body>

  <!-- Nav -->
  <header class="header">
    <div class="logo">
      <span class="logo-icon">✦</span>
      <span class="logo-text">Valinor <span>Library</span></span>
    </div>

    <button id="btn-mobile" aria-label="Abrir Menu">
      <span class="hamburguer"></span>
    </button>

    <nav class="nav" id="nav">
      <button class="nav-link active" data-target="tela-inicio">Início</button>
      <button class="nav-link" data-target="tela-livros">Grimório (Livros)</button>
      <button class="nav-link" data-target="tela-usuarios">Aventureiros (Users)</button>
      <button class="nav-link" data-target="tela-emprestimos">Missões (Empréstimos)</button>
    </nav>
  </header>

  <main class="container">

    <!-- Home -->

    <section id="tela-inicio" class="tela fade-in">
      <div class="hero">
        <h1>Painel do Guardião da Biblioteca</h1>
        <p>Bem-vindo ao sistema de gerenciamento da Valinor Library. O que deseja fazer hoje?</p>
        <div class="actions">
          <button class="btn-primary"
            onclick="document.querySelector('[data-target=\'tela-cadastro-livro\']').click()">+ Novo Livro</button>
          <button class="btn-primary"
            onclick="document.querySelector('[data-target=\'tela-cadastro-usuario\']').click()">+ Novo Usuário</button>
        </div>
      </div>
    </section>

    <!-- Livros -->

    <section id="tela-livros" class="tela hidden">
      <div class="header-section">
        <h2>Acervo do Grimório</h2>
        <button class="btn-primary" data-target="tela-cadastro-livro">+ Adicionar Obra</button>
      </div>
      <div id="lista-livros" class="grid-livros">
      </div>
    </section>

    <section id="tela-cadastro-livro" class="tela hidden">
      <h2>Inscrever Nova Obra no Grimório</h2>
      <form id="form-livro" class="form-valinor">
        <input type="hidden" id="id-edicao">
        <input type="text" id="titulo" placeholder="Título da Obra" required>
        <input type="text" id="autor" placeholder="Autor(a)" required>
        <input type="number" id="ano" placeholder="Ano (Ex: 1954)" min="1000" max="2030" required>
        <input type="text" id="genero" placeholder="Gênero (Fantasia, Sci-Fi...)" required>
        <input type="text" id="imagem" placeholder="URL da Capa (Opcional)">

        <div class="btn-container-form">
          <button type="submit" class="btn-primary">Salvar no Acervo</button>
          <button type="button" class="btn-primary" data-target="tela-livros">Voltar</button>
        </div>

      </form>
    </section>

    <!-- Usuário -->

    <section id="tela-usuarios" class="tela hidden">
      <div class="header-section">
        <h2>Guilda de Aventureiros</h2>
        <button class="btn-primary" data-target="tela-cadastro-usuario">+ Registrar Membro</button>
      </div>

      <div id="lista-usuarios-container">
        <div class="tabela-container">
          <table class="tabela-valinor">
            <thead>
              <tr>
                <th width="1%">Aventureiro</th>
                <th width="1%">Email</th>
                <th width="1%">Contato</th>
                <th width="1%">Nascimento</th>
                <th width="1%">Endereço</th>
                <th width="1%">Ações</th>
              </tr>
            </thead>
            <tbody id="tabela-corpo-usuarios">
            </tbody>
          </table>

          <p id="mensagem-vazia"
            style="text-align:center; padding: 20px; display:none; color: black; font-size: 1.2 rem;">
            Nenhum aventureiro registrado ainda.
          </p>
        </div>
      </div>
    </section>

    <section id="tela-cadastro-usuario" class="tela hidden">
      <h2>Registrar Novo Aventureiro (Usuário)</h2>
      <form id="form-usuario" class="form-valinor">
        <input type="hidden" id="id-edicao-usuario">

        <div class="form-grid">
          <div class="campo-grupo">
            <label>Nome Completo</label>
            <input type="text" id="nome" placeholder="Ex: Frodo Baggins" required>
          </div>

          <div class="campo-grupo">
            <label>CPF (Somente números)</label>
            <input type="text" id="cpf" placeholder="000.000.000-00" maxlength="14" required>
          </div>

          <div class="campo-grupo">
            <label>Data de Nascimento</label>
            <input type="date" id="nascimento" required>
          </div>

          <div class="campo-grupo">
            <label>Telefone / WhatsApp</label>
            <input type="tel" id="telefone" placeholder="(XX) 9XXXX-XXXX" required>
          </div>

          <div class="campo-grupo">
            <label>E-mail</label>
            <input type="email" id="email" placeholder="contato@email.com" required>
          </div>

          <div class="campo-grupo">
            <label>CEP</label>
            <input type="text" id="cep" placeholder="00000-000" maxlength="9" required>
          </div>

          <div class="campo-grupo">
            <label>Número</label>
            <input type="text" id="numero" placeholder="Nº" required>
          </div>

          <div class="campo-grupo ">
            <label>Endereço (Rua)</label>
            <input type="text" id="logradouro" placeholder="Buscando automaticamente..." readonly>
          </div>

          <div class="campo-grupo">
            <label>Bairro</label>
            <input type="text" id="bairro" readonly>
          </div>

          <div class="campo-grupo">
            <label>Cidade</label>
            <input type="text" id="localidade" readonly>
          </div>

          <div class="campo-grupo">
            <label>Estado (UF)</label>
            <input type="text" id="uf" readonly>
          </div>

          <div class="btn-container-form">
            <button type="submit" class="btn-primary">Registrar na Guilda</button>
            <button type="button" class="btn-primary" data-target="tela-livros">Voltar</button>
          </div>
      </form>
    </section>

    <!-- Empréstimos -->

    <section id="tela-emprestimos" class="tela hidden">
      <div class="header-section">
        <h2>Registro de Missões</h2>
        <button class="btn-primary" data-target="tela-novo-emprestimo">+ Nova Missão</button>
      </div>

      <div id="lista-emprestimos">
        <div class="tabela-container">
          <table class="tabela-valinor">
            <thead>
              <tr>
                <th>Livro (Grimório)</th>
                <th>Aventureiro</th>
                <th>Data Saída</th>
                <th>Data Retorno</th>
                <th>Status</th>
                <th>Ação</th>
              </tr>
            </thead>
            <tbody id="tabela-corpo-emprestimos">
            </tbody>
          </table>
          <p id="msg-emprestimos-vazio" style="text-align:center; padding: 20px; display:none;">
            Nenhuma missão ativa no momento.
          </p>
        </div>
      </div>
    </section>

    <section id="tela-novo-emprestimo" class="tela hidden">
      <h2>Iniciar Nova Missão</h2>

      <form id="form-emprestimo" class="form-valinor">
        <div class="campo-grupo">
          <label>Quem partirá na missão?</label>
          <select id="select-usuario" required>
            <option value="">Carregando aventureiros...</option>
          </select>
        </div>

        <div class="campo-grupo">
          <label>Qual conhecimento levará?</label>
          <select id="select-livro" required>
            <option value="">Carregando grimório...</option>
          </select>
        </div>

        <div class="btn-container">
          <button type="submit" class="btn-primary">Confirmar Empréstimo</button>
          <button type="button" class="btn-primary" data-target="tela-emprestimos">Voltar</button>
        </div>
      </form>
    </section>
  </main>

  <footer class="rodape">
    <div class="container">
      <p>&copy; 2025 <strong>Valinor Library</strong></p>
      <p class="dev-info">Desenvolvido com magia e código por <span>Sara Pires</span></p>
    </div>
  </footer>

  <script src="app/api.js"></script>
  <script src="app/main.js"></script>
  <script src="app/metodoCadastrarLivro.js"></script>
  <script src="app/metodoCadastrarUsuario.js"></script>
  <script src="app/metodoGerenciarLivros.js"></script>
  <script src="app/metodoGerenciarUsuarios.js"></script>
  <script src="app/metodoRegistrarEmprestimo.js"></script>
  <script>
    feather.replace()
  </script>

</body>

</html>